//version: 20220208203726914
var TNL=function(){var whitelist=[{uri:"/",udo:{app_id:"www",page_type:"browser",lang_pref:"en"}}],exclude=[],globalHashes={"4b7bc0e6507a553aa36d980fb082d01dad51956d3e011c5ff664f7e68ed65503":"NR_PROD_MSTL-NR_PROD_MSTL-3144_HOMEPAGE_THROTTLE,0","31979834a7e8d8aaf5985d0732828a088c8e7c176441b6a6291d425592b07ee0":"NR_PROD_MSTL-NR_PROD_MSTL-3144_HOMEPAGE_THROTTLE,1","4b8efe35369149be5a6dba6adf9e7e4cb790b6ceea82e589fd8f68cf847e76b6":"NR_PROD_MSTL-NR_PROD_MSTL-3270_HOMEPAGE_THROTTLE,0","31ec615710e155e23a3f16d3b6291d31705a7c65d23e429cc98decf2d4378987":"NR_PROD_MSTL-NR_PROD_MSTL-3270_HOMEPAGE_THROTTLE,1"},mmapiVersion="2.3-EA",mmpackageVersion="1.26",encType="SHA-256",globalPackages=["mmpackage-"+mmpackageVersion+".js","//service.maxymiser.net/platform/us/api/utils/uh.js"],environment=utag_data.environment.toLowerCase(),isDev=environment!=="production"&&environment!=="prod"&&environment!=="staging",isExcluded=false,isWhitelised=false,validUDO=window.utag_data&&window.WFUI_CONTAINER&&utag_data.app_id&&utag_data.device_type&&utag_data.environment&&utag_data.page_type&&utag_data.rtto_js_path&&utag_data.mt_tag_path,hasGeneralNelson=navigator.userAgent.match(/GeneralNelson/i),nonce="",rttoExperience="",campaignResponse=[],mtTagPath,enabled=true,validResponse=true,params={error:"",message:"|uri="+window.location.pathname+"|environment="+utag_data.environment.toLowerCase()+"|platform="+utag_data.app_id.toLowerCase()+"|device="+utag_data.device_type.toLowerCase()+"|wfacookie="+utag_data["mpuid"]},sendErrorPixel=function(params){var reqParams=encodeURIComponent("error="+params.error+params.message);var pixelUrl=TNL.mtTagPath+"mt.gif?"+reqParams;var elem=new Image(0,0);elem.src=pixelUrl},logger=function(message,params){if(isDev){console.log(message)}else if(!isDev&&params){sendErrorPixel(params);TNL.validResponse=false}},setRttoExperience=function(){for(var i=0;i<campaignResponse.length;i++){for(var j=0;j<campaignResponse[i].Elements.length;j++){if(rttoExperience){rttoExperience+="|campaign:"+campaignResponse[i].Name+"|element:"+campaignResponse[i].Elements[j].Name+"|variant:"+campaignResponse[i].Elements[j].VariantName}else{rttoExperience="campaign:"+campaignResponse[i].Name+"|element:"+campaignResponse[i].Elements[j].Name+"|variant:"+campaignResponse[i].Elements[j].VariantName}}if(campaignResponse[i].Elements.length===0){rttoExperience=rttoExperience?rttoExperience+="|campaign:"+campaignResponse[i].Name:"campaign:"+campaignResponse[i].Name}}utag_data.rtto_exp=rttoExperience},setNonceAttribute=function(){var scripts=document.querySelectorAll("script");for(var i=0;i<scripts.length;i++){if(scripts[i].nonce){TNL.nonce=scripts[i].nonce;break}}},unhide=function(){if(window.WFUI_CONTAINER&&window.WFUI_CONTAINER.top.isBodyHidden()&&!isWhitelised){window.WFUI_CONTAINER.top.makeBodyVisible()}},udoMatch=function(whitelist,option){var udoKeys=Object.keys(whitelist.udo);for(var i=0;i<udoKeys.length;i++){if(utag_data[udoKeys[i]].toLowerCase()!==whitelist.udo[udoKeys[i]].toLowerCase()){return false}}return true},uriMatch=function(whitelist,option){if(whitelist.uri){if(whitelist.subdirectory){whitelist.uri+=window.location.pathname.replace(whitelist.uri,"")}var uri=new RegExp(whitelist.uri+"(/|)(?:(home|index|)(/|.jhtml|.html|.htm|)?)$","i");return uri.test(window.location.pathname)===true}return true},invokeTestAndLearn=function(){TNL.mtTagPath=utag_data.mt_tag_path+"tnl/";var script=document.createElement("script");script.type="text/javascript";script.src=TNL.mtTagPath+"mmapi-"+mmapiVersion+".js";script.async=true;script.setAttribute("nonce",TNL.nonce);document.head.appendChild(script)},validateWhitelist=function(whitelist,option){if(option==="include"){isWhitelised=true;invokeTestAndLearn()}else{isExcluded=true;unhide()}},hasCampaign=function(whitelist,option){for(var i=0;i<whitelist.length;i++){if(whitelist[i].udo&&uriMatch(whitelist[i],option)&&udoMatch(whitelist[i],option)){validateWhitelist(whitelist[i],option);break}}option==="include"&&unhide()},replacer=function(name,val){if(val&&typeof val==="function"){val=val.toString();return val.replace(/function\s\(site/,"function(site")}else{return val}},cryptoSubtle=function(obj){var msgUint8=(new TextEncoder).encode(JSON.stringify(obj,replacer)),localHashes={};return crypto.subtle.digest(encType,msgUint8).then((function(hashBuffer){var hashArray=Array.from(new Uint8Array(hashBuffer)),hashHex=hashArray.map((function(b){return b.toString(16).padStart(2,"0")})).join("");localHashes[hashHex]=obj.Name;logger("RTTO: HASH: "+hashHex);hashKeys=Object.keys(localHashes);hashKeys.forEach((function(key){if(!(key in globalHashes)){params.error="HASH DOES NOT MATCH";logger("RTTO: "+obj.Name+" HASH DOES NOT MATCH",params)}}));return TNL.validResponse}))},packageHandler=function(response){campaignResponse=response.Campaigns||[];var campaigns=response.Campaigns||[],helperPackages=response.Packages||[];switch(true){case"undefined"===typeof response:params.error="response is undefined";logger("RTTO: Response is not defined",params);break;case campaigns.length===0:logger("RTTO: There is no campaign data "+response);break;case campaigns.length>0:setRttoExperience();helperPackages.forEach((function(key){if(globalPackages.indexOf(key)===-1){params.error="globalPackage does not match";logger(key+" globalPackage DOES NOT MATCH",params)}}));for(var i=0;i<campaigns.length;i++){var obj=campaigns[i];if(obj.HighLevelApiVersion!==mmpackageVersion){params.error="apiVersion does not match";logger("RTTO: "+obj.HighLevelApiVersion+" ApiVersion DOES NOT MATCH",params)}delete obj.HighLevelApiVersion;for(var k=0;k<obj.Scripts.length;k++){delete obj.Scripts[k].HighLevelApiVersion}if(obj.Elements.length){logger("RTTO: CAMPAIGN: "+obj.Name);for(var j=0;j<obj.Elements.length;j++){logger("RTTO: ELEMENT: "+obj.Elements[j].Name);logger("RTTO: VARIANT: "+obj.Elements[j].VariantName)}if(typeof TextEncoder!=="undefined"){return cryptoSubtle(obj)}else{TNL.validResponse=false}}}}};function init(){window.addEventListener("load",(function(){if(window.sendRTTODataToGA&&utag_data.rtto_exp){window.sendRTTODataToGA(utag_data.rtto_exp)}else{setTimeout((function(){if(window.sendRTTODataToGA&&utag_data.rtto_exp){window.sendRTTODataToGA(utag_data.rtto_exp)}}),1e3)}}));setNonceAttribute();hasCampaign(exclude,"exclude");!isExcluded&&hasCampaign(whitelist,"include")}return{init:init,isDev:isDev,enable:enabled,validUDO:validUDO,mtTagPath:mtTagPath,packageHandler:packageHandler,nonce:nonce,unhide:unhide,hasGeneralNelson:hasGeneralNelson,validResponse:validResponse}}();if(TNL.enable&&TNL.validUDO&&!TNL.hasGeneralNelson){TNL.init()}else{TNL.unhide()}